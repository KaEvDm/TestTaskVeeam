# Задача
Написать консольную программу на C#, предназначенную для поблочного сжатия и расжатия файлов 
с помощью System.IO.Compression.GzipStream. 

Для компрессии исходный файл делится на блоки одинакового размера, например, в 1 мегабайт. 
Каждый блок компрессится и записывается в выходной файл независимо от остальных блоков.

Программа должна эффективно распараллеливать и синхронизировать обработку блоков  в многопроцессорной 
среде и уметь обрабатывать файлы, размер которых превышает объем доступной оперативной памяти. 
В случае исключительных ситуаций необходимо проинформировать пользователя понятным сообщением, 
позволяющим пользователю исправить возникшую проблему, в частности если проблемы связаны 
с ограничениями операционной системы.

При работе с потоками допускается использовать только стандартные классы и библиотеки из .Net 3.5 
(исключая ThreadPool, BackgroundWorker, TPL). Ожидается реализация с использованием Thread-ов.
Код программы должен соответствовать принципам ООП и ООД (читаемость, разбиение на классы и т.д.). 
Параметры программы, имена исходного и результирующего файлов должны задаваться в командной строке 
следующим образом:

GZipTest.exe compress/decompress [имя исходного файла] [имя результирующего файла]

Исходники необходимо прислать вместе с проектом Visual Studio.

# Решение
Для операций compress и decompress применяется одинаковая последовательность действий.

![Алгоритм](/Images/Algorithm.jpg)

Краткое описание алгоритма:
1. Создаётся поток "чтения", считывающий данные из исходного файла и создающий новые блоки (каждому блоку, при создании присваивается порядковый номер).
2. Блок поступает в очередь ожидания на обработку.
3. Создаётся N потоков "обработки" (где N - удвоенное количество ядер процессора, минус два (основной поток и поток чтения)).
4. Каждый поток обработки забирает блоки из очереди ожидания на обработку, и обрабатывает соответствующим образом (тип обработки устанавливается на основе режима работы программы(compress/decompress)).
5. Обработанный блок поступает в очередь ожидания на запись (так как блоки могут быть обработаны с разной скоростью, очередь реализует запись блоков строго по порядку).
6. В основном потоке запускается метод "записи", забирающий блоки из очереди ожидания на запись, и записывающий их в получившийся файл.
7. По завершению потока записи программа уведомляет пользователя об успешном результате, закрывает все потоки и завершает работу.
